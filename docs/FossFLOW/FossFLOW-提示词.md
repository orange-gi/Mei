# FossFLOW 提示词分析

## 一、提示词系统概述

FossFLOW 项目虽然不是一个直接面向大语言模型的 AI 应用，但它在多个层面都涉及提示词（Prompt）的设计和运用。这些提示词系统可以分为三个主要类别：首先是面向 LLM 的图表生成指南，教导用户如何通过自然语言描述让 AI 生成可导入 FossFLOW 的 JSON 定义；其次是国际化翻译系统中的多语言文本模板，用于支持应用的全球化部署；第三是配置相关的提示文本，为用户提供操作指引和功能说明。这三类提示词虽然用途不同，但都遵循了清晰、准确、可维护的设计原则，共同构成了 FossFLOW 完善的用户引导体系。

从技术实现角度来看，FossFLOW 的提示词系统体现了现代软件工程中「内容即代码」（Content as Code）的理念。所有的提示文本、翻译资源、帮助信息都以结构化的数据形式存储在代码库中，便于版本控制、协作编辑和自动化处理。这种设计使得非开发人员也能参与内容的贡献和更新，降低了项目维护的门槛。同时，结构化的提示词数据也为应用提供了运行时动态加载和替换的能力，支持热更新和 A/B 测试等高级功能。

## 二、LLM 图表生成指南

### 2.1 压缩格式提示词设计

LLM-GENERATION-GUIDE.md 是 FossFLOW 项目中最重要的提示词文档，它详细说明了如何通过大语言模型生成符合 FossFLOW 导入格式的 JSON 定义。这个指南的核心是一个精心设计的压缩格式规范，使用极简的键名来减少 Token 消耗，同时保留完整的功能信息。压缩格式的 JSON 结构如下：

```json
{
  "t": "Diagram Title (max 40 chars)",
  "i": [
    ["Item Name", "icon_name", "Description"]
  ],
  "v": [
    [
      [[itemIndex, x, y], ...],
      [[fromIndex, toIndex], ...]
    ]
  ],
  "_": { "f": "compact", "v": "1.0" }
}
```

这个压缩格式的设计体现了对 LLM 生成场景的深度理解。传统的 JSON 格式使用完整的键名（如 items、connections），每个键名都需要消耗 Token 资源。压缩格式使用单字符键名（t 代表 title、i 代表 items、v 代表 views），可以在保持功能完整性的同时减少 70-90% 的 Token 使用量。格式版本标识（"_" 字段）确保了前向兼容性，即使未来格式有更新，解析器也能识别并做出相应处理。

### 2.2 图标命名规范提示

指南中提供了详尽的图标命名规范提示，这是确保 AI 生成的图表能够正确渲染的关键。图标命名遵循层级前缀的约定，不同的服务提供商有不同的前缀标识。AWS 服务使用 aws- 前缀（如 aws-ec2、aws-s3），Azure 服务使用 azure- 前缀（如 azure-virtual-machine、azure-sql-database），Google Cloud Platform 使用 gcp- 前缀（如 gcp-compute-engine、gcp-cloud-storage），Kubernetes 资源使用 k8s- 前缀（如 k8s-pod、k8s-service）。核心图标则直接使用语义化的名称（如 storage、server、user）。

```typescript
// 基础图标命名示例
storage  // 数据库/存储服务
server   // 通用服务器
user     // 用户/人员
cloud    // 云计算服务
network  // 网络组件
security // 安全/防火墙
api      // API/接口
queue    // 消息队列
cache    // 缓存系统
function // 函数/无服务器函数

// AWS 图标命名示例
aws-ec2           // EC2 计算实例
aws-s3            // S3 存储服务
aws-rds           // RDS 数据库服务
aws-lambda        // Lambda 无服务器函数
aws-api-gateway   // API Gateway
aws-cloudfront    // CloudFront CDN
```

提示词规范还明确规定了各项数据的长度限制：节点名称不超过 30 个字符，描述文字不超过 100 个字符，标题不超过 40 个字符。这些限制既保证了信息的完整性，又控制了 Token 消耗，使得 LLM 生成的 JSON 更加精炼。指南中还列出了三大云平台和 Kubernetes 的完整图标列表，总计超过 1000 个图标，为 AI 生成提供了丰富的选择空间。

### 2.3 定位系统提示词设计

定位系统的提示词设计同样经过了深思熟虑。FossFLOW 使用网格坐标系来表示节点的位置，X 轴表示水平位置（负数向左、正数向右），Y 轴表示垂直位置（负数向上、正数向下），每个单位代表一个网格单元。提示词规范建议将主要组件放置在坐标原点（0, 0）附近，相关组件保持 3-5 个单元的间距，整体布局控制在 -20 到 +20 的范围内。

```
定位系统使用说明：

1. 坐标系规则：
   - X 轴：水平位置，负数 = 向左，正数 = 向右
   - Y 轴：垂直位置，负数 = 向上，正数 = 向下
   - 网格间距：每个单位代表一个网格单元

2. 布局建议：
   - 主要组件放置在原点 (0, 0) 附近
   - 相关组件保持 3-5 个单元的间距
   - 整体布局范围控制在 -20 到 +20

3. 坐标示例：
   [[0, -6, 0], [1, 0, 0], [2, 6, 0], [3, 0, -4]]
                ↑     ↑     ↑     ↑
              节点  X坐标  Y坐标
```

连接定义的提示词设计同样清晰明了。连接被定义为 [源节点索引, 目标节点索引] 的数组对，索引对应 items 数组中的位置。这种设计简化了连接的定义过程，AI 生成时只需要按顺序编号节点，然后通过索引建立连接关系即可。指南中还提供了常见的连接模式示例，包括线性流（Linear Flow）、中心辐射（Hub and Spoke）、网格（Mesh）和分层（Layered）四种模式，帮助 AI 生成更符合设计规范的连接结构。

## 三、国际化翻译系统

### 3.1 翻译结构设计

FossFLOW 的国际化翻译系统采用了分层结构的设计，将不同功能模块的翻译文本组织在独立的命名空间下。这种设计使得翻译工作可以按模块分配给不同的贡献者，也便于针对特定功能进行翻译更新。翻译对象使用 TypeScript 接口定义，确保了翻译内容的类型安全和结构一致性。

```typescript
// 翻译接口结构定义
interface LocaleProps {
  common: {
    exampleText: string;
  };
  mainMenu: {
    undo: string;
    redo: string;
    open: string;
    exportJson: string;
    exportImage: string;
    clearCanvas: string;
    settings: string;
  };
  helpDialog: {
    title: string;
    close: string;
    keyboardShortcuts: string;
    mouseInteractions: string;
  };
  connectorHintTooltip: {
    tipCreatingConnectors: string;
    clickInstructionStart: string;
    clickInstructionMiddle: string;
    clickInstructionEnd: string;
  };
  // ... 更多模块
}
```

翻译模块的划分遵循功能相关性原则。mainMenu 模块包含主菜单的所有选项；helpDialog 模块包含帮助对话框中的文本；connectorHintTooltip 模块包含连接器工具的提示信息；settings 模块包含各种设置面板的标签和说明。这种模块化设计使得翻译人员可以专注于特定领域，提高翻译的准确性和一致性。

### 3.2 应用层国际化配置

应用层的国际化配置使用了 react-i18next 框架，支持翻译资源的动态加载和自动语言检测。配置代码中定义了 12 种支持语言的列表，每种语言都有对应的标签和区域代码。这种配置方式将语言选择与翻译资源分离，便于添加新语言支持。

```typescript
// 支持语言配置
export const supportedLanguages = [
  { label: 'English', value: 'en-US' },
  { label: '中文', value: 'zh-CN' },
  { label: 'Español', value: 'es-ES' },
  { label: 'Português', value: 'pt-BR' },
  { label: 'Français', value: 'fr-FR' },
  { label: 'हिन्दी', value: 'hi-IN' },
  { label: 'বাংলা', value: 'bn-BD' },
  { label: 'Русский', value: 'ru-RU' },
  { label: 'Italian', value: 'it-IT' },
  { label: 'Bahasa Indonesia', value: 'id-ID' },
  { label: 'Deutsch', value: 'de-DE' },
  { label: 'Türkçe', value: 'tr-TR' }
];

// i18n 初始化配置
i18n
  .use(Backend)           // HTTP 加载翻译资源
  .use(LanguageDetector)  // 自动检测浏览器语言
  .use(initReactI18next)
  .init({
    fallbackLng: 'en-US',    // 回退语言
    ns: ['app'],             // 命名空间
    backend: {
      loadPath: '/i18n/{{ns}}/{{lng}}.json'  // 资源路径模板
    },
    detection: {
      order: ['localStorage'],  // 检测顺序
      caches: ['localStorage']   // 缓存位置
    }
  });
```

翻译资源的动态加载采用了命名空间（Namespace）机制，将不同功能的翻译组织在独立的文件中。每个语言对应一个 JSON 文件，按需加载可以减少初始加载时间。语言检测功能会优先使用 localStorage 中存储的用户偏好，其次使用浏览器语言设置，最后回退到默认的英语。这种多层次的检测机制确保了语言选择的灵活性。

### 3.3 提示文本设计模式

国际化系统中的提示文本设计遵循了一致性和可读性的原则。每个提示文本都足够简洁，能够在有限的屏幕空间内传达完整的信息。同时，提示文本使用了参数占位符（如 {count}）来支持动态内容的插入。这种设计模式使得同一套翻译模板可以适用于不同的数据上下文。

```typescript
// 动态参数示例
iconCount: '{count} icons'  // 使用参数占位符

// 使用时填充参数
const count = 320;
const text = locale.settings.iconPacks.iconCount
  .replace('{count}', String(count));
// 结果: "320 icons"

// 多语言模板示例
settings: {
  hotkeys: {
    profileQwerty: 'QWERTY (Q, W, E, R, T, Y)',
    profileSmnrct: 'SMNRCT (S, M, N, R, C, T)',
    profileNone: 'No Hotkeys',
  }
}
```

工具提示（Tooltip）的文本设计采用了分步说明的模式，将复杂的操作分解为多个步骤，每个步骤对应一段独立的文本。这种设计使得用户可以按照步骤顺序逐步完成操作，降低了学习的难度。例如，连接器创建提示被分解为点击开始、点击结束两个独立的步骤，每个步骤都有独立的说明文本。

## 四、配置提示系统

### 4.1 热键配置提示

FossFLOW 提供了可配置的热键系统，支持多种热键配置方案。提示信息清晰说明了每种配置方案的特点和对应的热键布局。这种设计尊重了不同用户的键盘使用习惯，提供了灵活的选择空间。

```
热键配置选项说明：

1. QWERTY 布局（Q, W, E, R, T, Y）：
   - S: 选择工具
   - W: 平移工具
   - E: 添加图标
   - R: 矩形工具
   - C: 连接器工具
   - T: 文本工具
   - L: 套索选择
   - F: 自由套索选择

2. SMNRCT 布局（S, M, N, R, C, T）- 默认配置：
   - S: 选择工具
   - M: 平移工具
   - N: 添加图标
   - R: 矩形工具
   - C: 连接器工具
   - T: 文本工具
   - L: 套索选择
   - F: 自由套索选择

3. 无热键：禁用所有键盘快捷键
```

热键配置提示还包含了重要的工作状态说明，明确指出热键在输入框、文本区域或可编辑元素中会自动禁用，以避免与正常的文本输入操作冲突。这种边界情况的说明体现了对用户体验的细致考量。

### 4.2 连接器模式提示

连接器工具提供了两种创建模式的切换，相应的提示信息详细说明了每种模式的操作方法和适用场景。提示设计使用了对比呈现的方式，让用户能够直观地理解两种模式的差异。

```
连接器设置选项：

1. 点击模式（推荐）：
   说明：点击第一个节点，然后点击第二个节点来创建连接
   适用场景：触摸屏、精确度要求高的场景

2. 拖拽模式：
   说明：从第一个节点拖拽到第二个节点来创建连接
   适用场景：传统绘图软件用户、习惯拖拽操作的用户

注意事项：
- 您可以随时在设置中切换模式
- 选择的模式仅在连接器工具激活时生效
```

### 4.3 平移设置提示

平移设置提供了多种触发方式的配置，提示信息按照鼠标操作和键盘操作进行了分类组织。每种选项都配有简短的功能说明，帮助用户理解配置的效果。

```
平移设置选项：

【鼠标平移选项】
- 点击并拖拽空白区域：在画布空白处拖拽来平移视图
- 中键点击并拖拽：使用鼠标中键拖拽来平移视图
- 右键点击并拖拽：使用鼠标右键拖拽来平移视图
- Ctrl + 点击并拖拽：按住 Ctrl 键拖拽来平移视图
- Alt + 点击并拖拽：按住 Alt 键拖拽来平移视图

【键盘平移选项】
- 方向键：使用键盘方向键平移视图
- WASD 键：使用 W/A/S/D 键平移视图
- IJKL 键：使用 I/J/K/L 键平移视图

【键盘平移速度】
- 设置每次按键的平移距离（像素）

注意：平移选项与专用平移工具协同工作
```

## 五、帮助系统提示词

### 5.1 键盘快捷键帮助

帮助对话框中的键盘快捷键说明采用了表格化的呈现方式，将操作、快捷键和描述三要素清晰地对应起来。这种组织方式便于用户快速查找和记忆，提高使用效率。

```
键盘快捷键说明：

┌─────────────────┬─────────────────────┬──────────────────────────┐
│ 操作            │ 快捷键              │ 描述                     │
├─────────────────┼─────────────────────┼──────────────────────────┤
│ 撤销            │ Ctrl + Z            │ 撤销上一个操作           │
│ 重做            │ Ctrl + Y            │ 重做已撤销的操作         │
│ 放大            │ 鼠标滚轮向上        │ 放大画布视图             │
│ 缩小            │ 鼠标滚轮向下        │ 缩小画布视图             │
│ 打开帮助        │ H                   │ 打开快捷键帮助对话框     │
├─────────────────┼─────────────────────┼──────────────────────────┤
│ 选择工具        │ S 或点击选择按钮    │ 切换到选择模式           │
│ 平移工具        │ M 或点击平移按钮    │ 切换到平移模式           │
│ 添加图标        │ N 或点击添加按钮    │ 打开图标选择器           │
│ 绘制矩形        │ R 或点击矩形按钮    │ 切换到矩形绘制模式       │
│ 创建连接器      │ C 或点击连接器按钮  │ 切换到连接器模式         │
│ 添加文本        │ T 或点击文本按钮    │ 创建新的文本框           │
│ 套索选择        │ L                   │ 切换到矩形套索模式       │
│ 自由套索        │ F                   │ 切换到自由套索模式       │
└─────────────────┴─────────────────────┴──────────────────────────┘

注意：在输入框、文本区域中输入文本时，键盘快捷键会被禁用
```

### 5.2 鼠标交互说明

鼠标交互说明将操作方式与对应的功能进行了配对说明，帮助用户理解各种鼠标操作在特定模式下的效果。说明中还包含了重要注意事项的标注，确保用户不会遇到意外的交互冲突。

```
鼠标交互操作说明：

【选择模式】
- 左键点击：选中节点或取消选中
- 左键拖拽：移动选中的节点
- 右键点击：打开上下文菜单

【平移模式】
- 左键拖拽：在画布上平移视图
- 滚轮缩放：缩放视图

【连接器模式】
- 点击第一个节点：开始创建连接
- 点击第二个节点：完成连接创建
- 点击连接路径：添加或移动路径点

【通用操作】
- 右键点击空白区域：打开画布上下文菜单
- 右键点击节点：打开节点上下文菜单

注意事项：
- 右键菜单操作可能与系统右键菜单冲突
- 建议在需要使用系统右键菜单时使用 Shift + 右键
```

## 六、提示词优化建议

### 6.1 压缩格式优化建议

当前的压缩格式虽然有效地减少了 Token 消耗，但在某些场景下仍有优化空间。建议可以考虑引入更紧凑的数据类型表示，例如将布尔值从 "true"/"false" 简化为 1/0，将图标名称使用数字索引代替字符串标识。这些优化可以在保持功能完整性的前提下进一步压缩数据体积。

```typescript
// 优化建议：使用数字索引代替图标名称
// 当前格式
{
  "i": [
    ["Web App", "web", "Frontend application"],
    ["Database", "storage", "User data storage"]
  ]
}

// 优化后格式（使用图标索引）
{
  "i": [
    [1, -6, 0, 1, "Web App", "Frontend application"],
    //         ↑ 位置X 位置Y  图标索引
    [5, 6, 0, 2, "Database", "User data storage"]
  ]
}

// 图标索引映射
const ICON_INDEX = {
  web: 1,
  storage: 2,
  server: 3,
  user: 4,
  cloud: 5
  // ...
};
```

另一个优化方向是支持渐进式解析。当前格式要求完整的 JSON 数据才能开始渲染，对于大型图表可能导致加载延迟。建议可以引入流式解析机制，先渲染已解析的部分，同时继续加载剩余数据。这种优化对于 LLM 生成的大型图表尤其有价值。

### 6.2 翻译系统优化建议

翻译系统的结构设计已经相当完善，但在实际运营中可能面临翻译质量一致性维护的挑战。建议可以引入翻译记忆（Translation Memory）机制，记录已经确认的翻译对，在新增或更新翻译时提供参考。同时，建议建立翻译审核工作流，通过多人审核确保翻译质量。

```
翻译质量管理建议：

1. 翻译记忆库：
   - 记录已确认的原文-译文对
   - 相似原文自动推荐已有翻译
   - 标记需要审核的模糊匹配

2. 审核工作流：
   - 初稿翻译（自动或人工）
   - 同行评审（第二位翻译者）
   - 母语校对（最终确认）
   - 发布上线

3. 质量指标：
   - 术语一致性（Glossary 匹配率）
   - 风格一致性（句子结构相似度）
   - 完整性（翻译覆盖率）
```

### 6.3 提示信息优化建议

当前的提示信息设计清晰明了，但在某些场景下可以增加更多的上下文帮助。建议可以根据用户的使用进度动态调整提示的详细程度，对于新手用户提供更详细的步骤说明，对于高级用户则显示简洁的提示避免干扰。同时，建议增加视频教程或交互式演示的链接，让用户可以通过多种方式学习使用方法。

```
动态提示系统设计建议：

1. 用户级别识别：
   - 新用户：首次使用或操作频率低
   - 中级用户：熟悉基本操作
   - 高级用户：频繁使用并使用高级功能

2. 提示内容分级：
   - 新用户提示：包含详细步骤和示例
   - 中级用户提示：包含技巧和快捷方式
   - 高级用户提示：仅显示关键信息

3. 上下文敏感提示：
   - 检测用户当前任务阶段
   - 提供相关的下一步建议
   - 链接到详细文档或教程
```

## 七、总结

FossFLOW 项目的提示词系统展示了现代化应用在用户引导和国际化方面的最佳实践。LLM 图表生成指南提供了清晰、规范的提示词模板，使得用户可以通过自然语言与 AI 协作生成专业级的等轴测图表。国际化翻译系统采用了模块化、可扩展的设计，支持 12 种语言的完整界面翻译。配置提示和帮助信息遵循了一致性和可读性的原则，为用户提供了良好的使用体验。

从技术实现角度看，这些提示词系统的设计体现了「内容即代码」的理念，将所有文本内容以结构化的数据形式存储，便于版本控制、自动化处理和动态更新。这种设计模式值得其他项目借鉴，特别是在需要支持多语言、多平台的应用场景中。同时，提示词系统的模块化设计也便于社区贡献者参与翻译和内容更新，降低了项目维护的门槛。

---

**作者：Matrix Agent**

**创建时间：2026年1月31日**

**文档版本：1.0**
