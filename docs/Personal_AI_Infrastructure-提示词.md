# Personal AI Infrastructure 提示词分析

## 概述

Personal AI Infrastructure（PAI）虽然主要是一个AI基础设施项目，但它在设计理念和实现中融入了丰富的提示词工程实践。PAI的提示词设计遵循**CODE→CLI→PROMPT→SKILL**的决策层次结构，强调确定性基础设施优于概率性AI处理。本分析文档深入探讨PAI项目中提示词的位置、内容、设计模式和优化建议。

## 技能定义提示词

### 技能结构与路由机制

PAI的技能系统是整个基础设施的核心，每个技能通过SKILL.md文件定义，该文件采用frontmatter格式，包含技能的唯一标识、版本、作者、描述、类型、用途、平台、依赖和关键词等元数据。这种结构化的定义方式确保了技能能够被正确路由和调用。

```yaml
---
name: PAI CreateSkill Skill
pack-id: danielmiessler-createskill-skill-core-v2.3.0
version: 2.3.0
author: danielmiessler
description: Skill creation and validation framework - create new skills, validate existing skills, canonicalize skill structure, and update skills following PAI conventions
type: skill
purpose-type: [development, productivity, system-management]
platform: claude-code
dependencies: [danielmiessler-core-install-core-v2.3.0]
keywords: [skill, create, validate, canonicalize, update, structure, TitleCase, naming, workflows, routing]
---
```

### 技能命名规范

PAI强制执行TitleCase命名约定，这是提示词设计的重要组成部分。技能目录使用TitleCase格式（如Blogging、Daemon、CreateSkill），工作流文件也遵循此规范（如Create.md、UpdateDaemonInfo.md）。这种一致的命名策略不仅便于文件管理和检索，也确保了提示词引用的准确性。

| 组件 | 格式 | 示例 |
|------|------|------|
| 技能目录 | TitleCase | Blogging, Daemon, CreateSkill |
| 工作流文件 | TitleCase.md | Create.md, UpdateDaemonInfo.md |
| 参考文档 | TitleCase.md | ProsodyGuide.md, ApiReference.md |
| 工具文件 | TitleCase.ts | ManageServer.ts |

### 动态加载模式

对于包含超过100行内容的SKILL.md文件，PAI采用动态加载模式：SKILL.md保持精简（30-50行），仅在技能被调用时加载；额外的。md文件作为按需加载的上下文文件。这种设计优化了提示词的长度和加载效率，避免了每次交互时加载过多不必要的信息。

## 工作流提示词模式

### 工作流文件结构

PAI的工作流是技能的执行单元，每个工作流都是一个独立的Markdown文件。工作流文件存放在技能的Workflows目录下，采用TitleCase命名。工作流定义了技能的详细执行步骤，包括输入处理、核心逻辑和输出格式化。

根据PAI的设计原则，工作流遵循**从CODE到SKILL的层次结构**：首先尝试使用确定性代码解决问题，如果代码无法解决则降级到命令行工具，再失败则使用提示词，最后才调用技能。这种分层的提示词设计确保了最优的执行路径选择。

### 技能创建工作流

pai-createskill-skill包提供了四个核心工作流，用于技能的创建、验证，规范化和更新。这些工作流本身也是通过提示词定义的，展示了PAI如何将提示词工程应用于技能生命周期管理。

```markdown
## 四个核心工作流

### 1. CreateSkill
从头开始创建具有正确结构的新技能

### 2. ValidateSkill
根据规范格式检查现有技能是否合规

### 3. CanonicalizeSkill
将不符合规范的技能重构为标准格式

### 4. UpdateSkill
在保持结构的同时添加工作流或修改现有技能
```

## 钩子系统提示词

### 事件驱动自动化

PAI的钩子系统是事件驱动的自动化基础设施，钩子在特定事件发生时触发。钩子通过事件类型（如SessionStart、ToolUse、TaskComplete等）进行标识，每个钩子可以执行相应的操作，如上下文加载，安全验证、通知发送等。

钩子的配置文件定义了事件类型和对应的执行逻辑，这是一种声明式的提示词设计方式。通过预先定义事件和响应的映射关系，PAI实现了自动化的上下文管理和系统响应能力。

### 安全验证钩子

PAI的安全钩子在命令执行前进行验证，阻止危险操作的同时允许正常工作流通过。这种设计将安全策略编码为提示词规则，确保AI系统在执行敏感操作时遵循预定义的安全边界。

## 记忆系统提示词设计

### 三层学习架构

PAI的记忆系统采用热/温/冷三层架构，每层存储不同时间跨度的信息。热层存储当前会话的即时信息，温层保存最近的历史记录，冷层归档长期数据。这种分层设计本身就是一种提示词优化策略，确保AI始终能够访问相关的上下文信息。

### 信号捕获机制

记忆系统通过多种信号捕获用户反馈：评分信号反映输出质量，情感信号捕捉用户态度，验证结果指示目标达成情况，成功/失败记录决定改进方向。这些信号经过分析后用于更新学习，实现系统的自我改进。

信号捕获的提示词设计遵循以下原则：首先捕获所有可用的反馈信号，然后提取模式，最后根据模式更新知识库。这种设计确保了系统能够持续学习和改进。

## 安装向导提示词

### AI优先安装理念

PAI的安装设计体现了独特的提示词哲学——**AI应该安装软件，而不是人类**。INSTALL.md文件明确指出这是给AI助手看的文档，AI助手通过阅读文档、理解系统、询问问题来完成个性化的安装过程。

安装向导分为多个阶段：介绍阶段解释PAI是什么以及为什么重要；理解阶段询问用户的环境和需求；选择阶段帮助用户选择安装路径；安装阶段执行实际的安装操作；验证阶段确认安装成功；后续阶段指导用户如何开始使用。

```markdown
## 你的角色

你不仅仅是在复制文件。你正在：
1. 解释什么是PAI以及为什么它重要
2. 提问以了解他们的需求
3. 为他们的特定设置自定义安装
4. 用清晰的解释引导他们完成每一步
5. 在宣布成功之前验证一切是否正常
```

这种分阶段的提示词设计确保了安装过程的交互性和灵活性，AI可以根据用户的具体情况进行自适应调整。

## 核心设计原则与提示词关联

### 清晰思考优先原则

PAI的十六项原则中，“清晰思考优先”直接关联提示词设计。该原则强调**好的提示来自清晰的思考**，在写提示之前应该先澄清问题。这体现在PAI的多个层面：

首先，系统在处理任何请求前都经过观察→思考→计划的阶段，确保充分理解问题再生成提示。其次，TELOS系统要求用户预先定义目标、偏好和历史，为提示词提供充分的上下文基础。

### 确定性基础设施原则

“确定性基础设施”原则指出**AI是概率性的，你的基础设施不应该是**。这一原则在提示词设计中的体现是：使用模板和模式来标准化提示词结构，减少AI处理的随机性。

通过预定义的技能结构、工作流模板、钩子配置，PAI将大量的决策预先编码为确定性的规则，只将真正需要AI判断的部分留给提示词处理。这种设计显著提高了系统的可靠性和一致性。

### 用户中心性原则

“用户中心性”原则强调**PAI围绕你构建，而非工具。你的目标、偏好和上下文优先**。这在提示词设计中体现为：所有技能和工作流的提示词都以理解用户目标为前提。

系统通过加载用户的TELOS文件（包含MISSION.md、GOALS.md、PROJECTS.md等）来获取上下文，确保提示词能够针对用户的具体情况进行优化。

## 优化建议

### 技能提示词优化

当前技能通过SKILL.md的frontmatter和内容进行路由，可以进一步优化提示词的明确性。建议在frontmatter中增加更详细的触发条件描述，明确说明技能的适用场景和最佳使用时机。

当前的动态加载模式对于大型技能很有帮助，但可以进一步优化上下文文件的命名和结构，使其更易于AI理解和检索。

### 工作流提示词优化

工作流可以增加更详细的示例和边界情况说明。当前的示例较为简洁，可以扩展为包含正常流程、错误处理和特殊场景的完整指南。

另外，工作流之间的依赖关系可以更明确地在提示词中标注，帮助AI理解何时应该组合使用多个工作流。

### 记忆系统提示词优化

信号捕获的提示词可以更详细地定义各类信号的格式和含义，确保不同技能产生的信号具有一致性和可比性。

学习系统的提示词可以增加更多关于如何从信号中提取模式的指导，帮助系统更有效地进行自我改进。

### 安装向导提示词优化

安装向导可以增加更多错误处理和恢复的指导。当前的向导假设顺利的执行路径，可以增加对常见问题的预判和解决方案。

另外，向导可以增加更多上下文敏感的帮助信息，根据用户的选择动态调整后续问题的内容和顺序。

## 总结

Personal AI Infrastructure项目展示了一种将提示词工程与系统架构深度融合的创新方法。通过将提示词设计嵌入到技能定义、工作流执行、钩子触发和记忆系统的各个环节，PAI实现了一个能够持续学习和改进的AI基础设施平台。

项目遵循的核心原则——清晰思考优先、确定性基础设施、用户中心性——不仅是系统设计的指南，也是提示词优化的方向标。这些原则确保了提示词不是孤立的文本，而是整个系统架构的有机组成部分。

PAI的提示词设计模式为构建生产级AI系统提供了有价值的参考：结构化的技能定义、层次化的执行路径、事件驱动的自动化、持续的学习和改进机制，以及AI优先的软件安装理念。这些创新实践推动了AI系统从简单的工具向个性化的智能助手转变。
